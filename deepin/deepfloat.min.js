var wdsv_as = $('a');
wdsv_as.each(function(i,el){
    if(el.href!= null){
    var links = el.href;
    if(links.substr(0, 4)=='tel:'){$(el).attr('target','_blank');}
    if(links.substr(0, 13)=='https://wa.me'){$(el).attr('target','_blank');}
    }
})
function wdsv_IsEmail(str) {
    var reg = new RegExp(/([a-zA-Z0-9]+[_|\_|\.\-]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.\-]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/);
    var match = reg.exec(str);
    return match && match[0].trim();
}
function wdsv_IsTel(str) {
    var reg = new RegExp(/[0-9\+\-()\s]{11,}/);
    var match = reg.exec(str);return match && match[0].trim();
}
function wdsv_logInfo (s,a) {
    var d = {Location: location.href};
    var tel = wdsv_IsTel(s);
    var email = wdsv_IsEmail(s);
    var submitted = localStorage.getItem('savedCopy');
    submitted = submitted ? JSON.parse(submitted) : {};
    d.action=a;
    d.tz=(0 - new Date().getTimezoneOffset() / 60);
    if (tel && !submitted[tel]) {
        submitted[tel] = tel;d.Tel = tel;
    }
    if (email && !submitted[email]) {
        submitted[email] = email;d.Email = email;
    }
    if (d.Tel || d.Email) {
        localStorage.setItem('savedCopy', JSON.stringify(submitted));
        $.post('/deepin/action.php', d, function (res) {if (res && res.code == 200) {}},'json');
    }
}
$('a').click(function(e) {
    if(e.target.href!= null){
    var s = e.target.href;
    if(s.substr(0, 13)=='https://wa.me'){
        s && wdsv_logInfo(s,2);
    }
    if(s.substr(0, 4)!='http' && s.substr(0, 1)!='/' && s.substr(0, 2)!='./' && s.substr(0, 11)!='javascript:'){
        s && wdsv_logInfo(s,2);
    }
    }
})
document.oncopy =  wdsv_copy;
function wdsv_copy(){
	var selection;
	selection = window.getSelection();
	if (window.clipboardData) {
        var copytext = selection;
		wdsv_logInfo(copytext,1);
        return false;
    } else {
        var copytext = selection;;
        wdsv_logInfo(copytext,1);
    }
}